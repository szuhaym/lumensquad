{% assign lang = page.lang | default: site.default_lang %}
{% assign t = site.data.locales[lang] %}
{% assign prefix = "" %}
{% if lang != site.default_lang %}
  {% assign prefix = "/" | append: lang %}
{% endif %}

<section class="no-padding" id="portfolio">
  <div class="container-fluid">
    <div class="row portfolio-grid">

      {%- comment -%}
      If you have a data file for portfolio items (e.g. _data/portfolio.yml) structured per language,
      it will be used. Otherwise fall back to numbered images 1..28 in img/portfolio/.
      Each portfolio item can have: image, name, category, url (optional).
      {%- endcomment -%}

      {% if site.data.portfolio and site.data.portfolio[lang] %}
        {% for project in site.data.portfolio[lang] %}
          <div class="col-lg-4 col-sm-6">
            <a href="{% if project.url %}{{ prefix }}{{ project.url }}{% else %}#{% endif %}" class="portfolio-box">
              <img src="{{ site.baseurl }}/img/portfolio/{{ project.image }}" class="img-responsive" alt="{{ project.name | default: t.portfolio.project_name }}">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    {{ project.category | default: t.portfolio.project_category }}
                  </div>
                  <div class="project-name">
                    {{ project.name | default: t.portfolio.project_name }}
                  </div>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
      {% else %}
        {% for i in (1..28) %}
          <div class="col-lg-4 col-sm-6">
            <a href="#" class="portfolio-box">
              <img src="{{ site.baseurl }}/img/portfolio/{{ i }}.jpg" class="img-responsive" alt="{{ t.portfolio.project_name }}">
              <div class="portfolio-box-caption">
                <div class="portfolio-box-caption-content">
                  <div class="project-category text-faded">
                    {{ t.portfolio.project_category }}
                  </div>
                  <div class="project-name">
                    {{ t.portfolio.project_name }}
                  </div>
                </div>
              </div>
            </a>
          </div>
        {% endfor %}
      {% endif %}

    </div>
  </div>
</section>
